## Цель проекта

Наглядно показать современный подход к построению микросервисной платформы, рассчитанной на масштабирование под высокую нагрузку, автоматизацию процессов и синхронную работу нескольких команд. Мы демонстрируем, как разнести ответственность по независимым сервисам и при этом сохранить единый поток разработки и релизов.

## Используемые технологии

- Go для всех сервисов (общий стиль, единые практики).
- Apache Kafka как шина событий между компонентами.
- gRPC и HTTP для внутренних и внешних интерфейсов.
- MinIO (S3) для хранения медиаданных.
- Yandex Vision OCR (через сервис doc2text) с возможностью подмены провайдера.
- Docker для упаковки и CI/CD (репозиторий `deploy`).

## Предназначение проекта

Платформа принимает сообщения из Telegram и VK, нормализует их, определяет, есть ли медиаконтент, запускает распознавание текста и формирует персональный ответ. Цепочка состоит из forwarder → normalizer → message-responder → message-responder-ocr → doc2text → response-preparer → sender, что позволяет обрабатывать тысячи запросов параллельно и прозрачно подключать новые каналы.

## Технические подробности работы

1. **Webhook-слой** (telegram-forwarder, vk-forwarder) получает запросы от мессенджеров и помещает сырые данные в Kafka — минимальная логика, чтобы легко масштабировать вход.
2. **Нормализация** (telegram-normalizer, vk-normalizer) скачивает файлы, на лету загружает их в S3 и публикует единый формат сообщения с ссылками на объекты.
3. **Решение об обработке** (message-responder) определяет сценарий: если есть изображение, мгновенно подтверждает пользователю и ставит задачу в топик для message-responder-ocr.
4. **OCR-ступень** вызывает doc2text по gRPC. doc2text оркестрирует скачивание файла из S3, конвертацию в Base64, запрос в Yandex Vision и отдаёт клиенту распознанный текст.
5. **Подготовка и отправка** (response-preparer + sender) формируют сообщение в формате конкретной платформы и через её API доставляют пользователю. Все сервисы логируют прогресс, используют единый подход к конфигурации (`env + Kafka`) и легко обновляются через CI/CD.

